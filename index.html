<!DOCTYPE html>
<html>
<head>
    <title>Random Password Generator</title>
    <style type="text/css">
        body {
            font-family: sans-serif;
            text-align: center;
        }
        h1 {
            font-family: sans-serif;
        }

        #password {
            font-family: monospace;
        }

        input, label, button {
            vertical-align: middle;
        }
    </style>
</head>
<body>
<h1>Here, have a password:</h1>
<h2 id=password></h2>
<label for="length">Length</label> <input id='length' type="number" value="44"> <button onclick="another()">Another!</button><br/>
<input id="words" type="checkbox" onclick="switchMode()"/> <label for="words">Words</label>
<script type="text/javascript" src="words.js"></script>
<script type="text/javascript">
    var another = function() {
        var length = Number.parseInt(document.getElementById("length").value);
        var passwordEl = document.getElementById("password");
        if (document.getElementById("words").checked) {
            var data = crypto.getRandomValues(new Uint8Array(Math.ceil(length * 3 / 2)));
            passwordEl.innerText = new Array(length).fill().map(function(_,i) {
                var extra = data[length + (i >> 1)];
                if (i % 2) {
                    extra = extra >> 4;
                } else {
                    extra = extra & 15;
                }
                return (data[i] << 4) + extra;
            }).map(function(i) {
                return words[i];
            }).join('_');
        } else {
            passwordEl.innerText = btoa(String.fromCharCode.apply(this,
                crypto.getRandomValues(new Uint8Array(Math.ceil(length / 4) * 3))))
                .replace(/[+]/g, '-').replace(/[/]/g, '_').substr(0, length);
        }
    };
    var switchMode = function() {
        if (document.getElementById("words").checked) {
            document.getElementById("length").value = 6;
        } else {
            document.getElementById("length").value = 44;
        }
    };
    another();
</script>
</body>